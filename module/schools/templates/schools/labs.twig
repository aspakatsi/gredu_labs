{% extends "schools/index.twig" %}

{% import "schools/index.twig" as macros %}

{% block schoolTitle %}
    {{ parent() }} <small>Χώροι</small>
{% endblock %}

{% block navItems %}
    <li role="presentation" class="pull-right">
        <a href="#" class="btn btn-primary btn-add-lab" title="Καταχώρηση χώρου">
            <i class="visible-xs fa fa-plus"></i>
            <span class="hidden-xs">Καταχώρηση χώρου</span>
        </a>
    </li>
{% endblock %}

{% block schoolContent %}
    <div id="school-labs">
        <div class="table-responsive">
            <table class="table table-hover table-striped">
                <thead>
                    <tr>
                        <th>Ονομασία</th>
                        <th>Τύπος</th>
                        <th>Υπεύθυνος</th>
                        <th>Επιφάνεια (m<sup>2</sup>)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for lab in labs %}
                    <tr data-lab="{{ lab|json_encode }}" data-id="{{ lab.id }}">
                        <td>{{ lab.name }}</td>
                        <td>{{ lab.typeName }}</td>
                        <td>{{ lab.responsibleName }}</td>
                        <td>{{ lab.area }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" class="text-center text-muted">
                            Δεν έχουν καταχωρηθεί χώροι.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4"></td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <div class="modal fade" id="lab-form-modal" tabindex="-1" role="dialog" aria-labelledby="lab-from">
            <form class="form-horizontal">
                <div class="modal-dialog" role="form">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <h4 class="modal-title">Στοιχεία χώρου</h4>
                        </div>
                        <div class="modal-body">
                            {{ macros.input('name', 'Όνομα', '', 'text', {'required': ''}) }}
                            {{ macros.select('responsible', 'Υπεύθυνος', staff, '', {'required': ''}) }}
                            {{ macros.select('type', 'Τύπος', lab_types, '', {'required': ''}) }}
                            {{ macros.input('area', 'Επιφάνεια (m<sup>2</sup>)', '', 'number', {'required': '', 'min': 0, 'max': 500}) }}
                            {{ macros.file('blueprint', 'Αρχείο κάτοψης') }}
                            {{ macros.select('lessons', 'Μαθήματα', lessons, '', {'multiple': ''}) }}
                            {{ macros.text('use_in_program', 'Χρήση στα πλαίσια μαθημάτων') }}
                            {{ macros.text('use_ext_program', 'Χρήση για δραστηριότητες εκτός εκπαιδευτικού προγράμματος') }}
                            <input type="hidden" name="id" value="">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Κλείσιμο</button>
                            <button name="submit" value="submit" type="submit" class="btn btn-primary">Αποθήκευση</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <script type="text/template" id="lab-row-template">
            <td><%= lab.name %></td>
            <td><%= lab.typeName %></td>
            <td><%= lab.responsibleName %></td>
            <td><%= lab.area %></td>
        </script>
    </div>
{% endblock %}

{% block inlinejs %}
    {{ parent() }}
    <script src="{{ base_url }}/js/schools/labs.js"></script>
{% endblock %}